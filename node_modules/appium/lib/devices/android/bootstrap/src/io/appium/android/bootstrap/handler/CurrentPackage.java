package io.appium.android.bootstrap.handler;

import static io.appium.android.bootstrap.utils.API.API_18;

import org.json.JSONException;

import com.android.uiautomator.core.UiDevice;

import android.os.RemoteException;
import io.appium.android.bootstrap.AndroidCommand;
import io.appium.android.bootstrap.AndroidCommandResult;
import io.appium.android.bootstrap.CommandHandler;

public class CurrentPackage extends CommandHandler{

	@Override
	public AndroidCommandResult execute(AndroidCommand command)
			throws JSONException, RemoteException, InterruptedException {
		// TODO Auto-generated method stub
		if (!API_18) {
		      return getErrorResult("Unable to open notifications on device below API level 18");
		    }
		 // does not make sense on an element
	    if (command.isElementCommand()) {
	      return getErrorResult("Unable to check screen on with an element.");
	    }
	    final UiDevice device = UiDevice.getInstance();
	    try {
			return getSuccessResult(device.getCurrentPackageName());
		} catch (Exception e) {
			// TODO: handle exception
			return getErrorResult("Check screen on fail");
		}
	}

	
}
